<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnapScrap โ ุชูุฒูู ูุฑูุน Stories</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <div class="bg-grid"></div>
    <div class="app-layout">
        <aside class="app-sidebar">
            <div class="sidebar-header">
                <div class="logo-row-small">
                    <span class="logo-snapchat-small">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="32" height="32">
                            <path
                                d="M12.206.793c.99 0 4.347.276 5.93 3.821.529 1.193.403 3.219.299 4.847l-.003.06c-.012.18-.022.345-.03.51.075.045.203.09.401.09.3-.016.659-.12 1.033-.301.165-.088.344-.104.464-.104.182 0 .359.029.509.09.45.149.734.479.734.838.015.449-.39.839-1.213 1.168-.089.029-.209.075-.344.119-.45.135-1.139.36-1.333.81-.09.224-.061.524.12.868l.015.015c.06.136 1.526 3.475 4.791 4.014.255.044.435.27.42.509 0 .075-.015.149-.045.225-.24.569-1.273.988-3.146 1.271-.059.091-.12.375-.164.57-.029.179-.074.36-.134.553-.076.271-.27.405-.555.405h-.03c-.135 0-.313-.031-.538-.074-.36-.075-.765-.135-1.273-.135-.3 0-.599.015-.913.074-.6.104-1.123.464-1.723.884-.853.599-1.826 1.288-3.294 1.288-.06 0-.119-.015-.18-.015h-.149c-1.468 0-2.427-.675-3.279-1.288-.599-.42-1.107-.779-1.707-.884-.314-.045-.629-.074-.928-.074-.54 0-.958.089-1.272.149-.211.043-.391.074-.54.074-.374 0-.523-.224-.583-.42-.061-.192-.09-.389-.135-.567-.046-.181-.105-.494-.166-.57-1.918-.222-2.95-.642-3.189-1.226-.031-.063-.052-.15-.049-.225-.015-.243.165-.465.42-.509 3.264-.54 4.73-3.879 4.791-4.02l.016-.029c.18-.345.224-.645.119-.869-.195-.434-.884-.658-1.332-.809-.121-.029-.24-.074-.346-.119-1.107-.435-1.257-.93-1.197-1.273.09-.479.674-.793 1.168-.793.146 0 .27.029.383.074.42.194.789.3 1.104.3.234 0 .384-.06.465-.105l-.046-.569c-.098-1.626-.225-3.651.307-4.837C7.392 1.077 10.739.807 11.727.807l.419-.015h.06z" />
                        </svg>
                    </span>
                    <h2>SnapScrap</h2>
                </div>
            </div>

            <div class="sidebar-content">
                <div class="sidebar-section">
                    <h3>ุงูุญุณุงุจุงุช ุงููุถุงูุฉ</h3>
                    <div class="accounts-actions-sidebar">
                        <button type="button" id="selectAll" class="btn-link-sm">ุงููู</button>
                        <button type="button" id="deselectAll" class="btn-link-sm">ูุง ุฃุญุฏ</button>
                    </div>
                    <div class="accounts-list sidebar-list" id="accountsList">
                        {% for a in accounts %}
                        <label class="account-item-sidebar">
                            <input type="checkbox" class="account-check" data-username="{{ a.username }}" {% if
                                a.checked %}checked{% endif %}>
                            <span class="account-name">{{ a.username }}</span>
                            <button type="button" class="btn-remove-sm" data-username="{{ a.username }}"
                                title="ุญุฐู">ร</button>
                        </label>
                        {% endfor %}
                        <p class="empty-accounts" id="emptyAccounts" style="display:none">ูุง ุชูุฌุฏ ุญุณุงุจุงุช</p>
                    </div>
                </div>

                <div class="sidebar-footer">
                    <label class="toggle sidebar-toggle-item">
                        <input type="checkbox" id="batchMergeSidebar">
                        <span>ุฏูุฌ ุชููุงุฆู</span>
                    </label>
                    <button type="button" id="downloadSelected" class="btn btn-primary btn-block">
                        ุชูุฒูู ุงููุญุฏุฏ
                    </button>
                </div>
            </div>
        </aside>

        <main class="app-content">
            <header class="mobile-header" style="display:none;">
                <div class="logo-row">
                    <h1>SnapScrap</h1>
                </div>
            </header>

            <!-- Add Accounts -->
            <section class="card accounts-card">
                <div class="card-header">
                    <div class="header-icons">
                        <span class="icon">โ</span>
                        <h2>ุฅุถุงูุฉ ุญุณุงุจุงุช</h2>
                    </div>
                </div>
                <form id="addAccountForm" class="form-add-accounts">
                    <div class="input-row">
                        <input type="text" id="newAccountInput" placeholder="ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู (ูุซุงู: dary_1256)">
                    </div>
                    <textarea id="newAccounts" placeholder="ุฃู ุฃุถู ุญุณุงุจุงุช ูุชุนุฏุฏุฉ (ูู ุญุณุงุจ ูู ุณุทุฑ)" rows="3"
                        style="display:none"></textarea>

                    <div class="add-actions-row">
                        <button type="submit" id="submitAddBtn" class="btn btn-secondary">ุฅุถุงูุฉ</button>
                        <button type="button" id="toggleBulkAdd" class="btn-link">ุฅุถุงูุฉ ุฌููุฉ / ุญุณุงุจ ูุงุญุฏ</button>
                    </div>
                </form>

                <div class="suggested-section">
                    <div class="suggested-header" id="suggestedHeader" style="cursor: pointer;">
                        <span id="suggestedToggleIcon">โผ</span>
                        <span>ุญุณุงุจุงุช ููุชุฑุญุฉ</span>
                        <button type="button" id="refreshSuggested" class="btn-link btn-refresh" title="ุชุญุฏูุซ"
                            style="margin-right: auto;">โป</button>
                    </div>
                    <div class="suggested-list" id="suggestedList"></div>
                    <button type="button" id="addSelectedSuggested" class="btn btn-secondary btn-sm">ุฅุถุงูุฉ
                        ุงููุญุฏุฏ</button>
                </div>
            </section>

            <!-- Quick Download -->
            <section class="card download-card">
                <div class="card-header">
                    <h2>ุชูุฒูู ุณุฑูุน</h2>
                    <p>ุฏูู ุฅุถุงูุฉ ูููุงุฆูุฉ</p>
                </div>
                <form id="downloadForm" class="form">
                    <div class="input-group">
                        <input type="text" id="username" placeholder="ุงุณู ุงููุณุชุฎุฏู">
                        <label class="toggle">
                            <input type="checkbox" id="mergeAfter">
                            <span>ุฏูุฌ ุจุนุฏ ุงูุชุญููู</span>
                        </label>
                    </div>
                    <button type="submit" class="btn btn-secondary">ุชูุฒูู</button>
                </form>
            </section>

            <!-- Merge -->
            <section class="card merge-card">
                <div class="card-header">
                    <h2>ุฏูุฌ ุงูููุฏูููุงุช</h2>
                </div>
                <form id="mergeForm" class="form">
                    <div class="input-row">
                        <input type="text" id="mergeUsername" placeholder="ุงุณู ุงููุณุชุฎุฏู">
                        <input type="date" id="mergeDate">
                    </div>
                    <div class="merge-mode" style="display:none;">
                        <label class="radio"><input type="radio" name="mergeMode" value="shorts" checked> Shorts</label>
                    </div>
                    <button type="submit" class="btn btn-secondary">ุฏูุฌ</button>
                </form>
            </section>

            <!-- Schedule -->
            <section class="card schedule-card">
                <div class="card-header">
                    <div class="header-icons">
                        <span class="icon">โฐ</span>
                        <h2>ุฌุฏููุฉ</h2>
                    </div>
                </div>
                <form id="scheduleForm" class="form">
                    <label class="toggle big">
                        <input type="checkbox" id="scheduleEnabled" {% if schedule.enabled %}checked{% endif %}>
                        <span>ุชูุนูู ุงูุฌุฏููุฉ ุงูููููุฉ</span>
                    </label>
                    <div class="schedule-time">
                        <input type="number" id="scheduleHour" min="0" max="23" value="{{ schedule.get('hour', 9) }}">
                        <span>:</span>
                        <input type="number" id="scheduleMinute" min="0" max="59"
                            value="{{ schedule.get('minute', 0) }}">
                    </div>
                    <p class="next-run" id="nextRun"></p>
                    <label class="toggle">
                        <input type="checkbox" id="scheduleMerge" {% if schedule.merge %}checked{% endif %}>
                        <span>ุฏูุฌ ุชููุงุฆู</span>
                    </label>
                    <button type="submit" class="btn btn-secondary">ุญูุธ</button>
                </form>
            </section>

            <!-- Upload -->
            <section class="card upload-card highlight">
                <div class="card-header">
                    <div class="header-icons">
                        <span class="icon icon-yt">โถ</span>
                        <h2>YouTube Upload</h2>
                    </div>
                </div>
                <div class="upload-tabs">
                    <button type="button" class="tab active" data-tab="folder">ูุฌูุฏ</button>
                    <button type="button" class="tab" data-tab="file">ููู</button>
                </div>
                <div id="uploadFolder" class="tab-content active">
                    <div class="refresh-row channels-row">
                        <button type="button" id="refreshMerged" class="btn-link btn-refresh">โป ูุฌูุฏุงุช</button>
                        <span>|</span>
                        <button type="button" id="refreshChannels" class="btn-link btn-refresh">โป ูููุงุช</button>
                        <a href="/youtube/connect" id="addChannel" class="btn-link">+ ููุงุฉ</a>
                    </div>
                    <div class="channel-select-row">
                        <select id="uploadChannel">
                            <option value="">ุงุฎุชุฑ ุงูููุงุฉ</option>
                        </select>
                    </div>
                    <p class="youtube-channels" id="youtubeChannels"></p>
                    <form id="uploadForm" class="form">
                        <div class="input-row">
                            <select id="uploadUsername">
                                <option value="">ุงุฎุชุฑ ุงููุฌูุฏ</option>
                                <option value="__manual__">ูุฏูู</option>
                                {% for f in merged_folders %}
                                <option value="{{ f.username }}" data-date="{{ f.date }}">{{ f.username }} / {{ f.date
                                    }}</option>
                                {% endfor %}
                            </select>
                            <div id="manualUpload" class="manual-row" style="display:none">
                                <input type="text" id="uploadUsernameManual" placeholder="User">
                                <input type="text" id="uploadDateManual" placeholder="Date">
                            </div>
                            <input type="hidden" id="uploadDate">
                            <select id="uploadPrivacy">
                                <option value="private">ุฎุงุต</option>
                                <option value="unlisted">ุบูุฑ ูุฏุฑุฌ</option>
                                <option value="public">ุนุงู</option>
                            </select>
                            <select id="uploadType" style="display:none;">
                                <option value="shorts" selected>Shorts</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-accent">ุฑูุน ุงููุญุฏุฏ</button>
                    </form>
                </div>
                <div id="uploadFile" class="tab-content">
                    <form id="uploadFileForm" class="form">
                        <div class="file-drop" id="fileDrop">
                            <input type="file" id="videoFile" accept="video/*" hidden>
                            <p class="file-drop-text">ุงุณุญุจ ููู ููุง</p>
                            <p class="file-selected" id="fileSelected" style="display:none"></p>
                        </div>
                        <input type="text" id="uploadTitle" placeholder="ุงูุนููุงู">
                        <select id="uploadFileChannel">
                            <option value="">ุงุฎุชุฑ ุงูููุงุฉ</option>
                        </select>
                        <select id="uploadFilePrivacy">
                            <option value="private">ุฎุงุต</option>
                            <option value="unlisted">ุบูุฑ ูุฏุฑุฌ</option>
                            <option value="public">ุนุงู</option>
                        </select>
                        <button type="submit" class="btn btn-accent">ุฑูุน YouTube</button>
                    </form>
                </div>
            </section>

            <!-- YouTube Bulk Upload Card -->
            <section class="card bulk-card highlight">
                <div class="card-header">
                    <div class="header-icons">
                        <span class="icon icon-yt">โถ</span>
                        <h2>ุฑูุน ุงููู (Bulk Upload)</h2>
                    </div>
                    <p>ุฑูุน ุฌููุน ุงููุฌูุฏุงุช ุงูุฌุงูุฒุฉ ูุชูุฒูุนูุง ุนูู ุงููููุงุช</p>
                </div>
                <div class="form">
                    <div class="input-row">
                        <select id="bulkUploadChannel">
                            <option value="">ุงุฎุชุฑ ุงูููุงุฉ (ููู: ุงุฎุชุฑ Content Creators Stories)</option>
                        </select>
                    </div>
                    <button type="button" id="uploadAll" class="btn btn-primary"
                        style="background-color: var(--yt-red); color: white;">ุจุฏุก ุงูุฑูุน ุงูุดุงูู</button>
                </div>
            </section>

            <!-- TikTok -->
            <section class="card tiktok-card">
                <div class="card-header">
                    <div class="header-icons">
                        <span class="icon">๐ฑ</span>
                        <h2>TikTok Upload</h2>
                    </div>
                </div>
                <div class="tiktok-content">
                    <p class="tiktok-info">ูุณุงุนุฏ ุงูุฑูุน ุงููุฏูู (Manual Bridge)</p>
                    <div class="form">
                        <div class="input-row">
                            <select id="tiktokFolder">
                                <option value="">ุงุฎุชุฑ ุงููุฌูุฏ</option>
                                {% for f in merged_folders %}
                                <option value="{{ f.username }}" data-date="{{ f.date }}">{{ f.username }} / {{ f.date
                                    }}</option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="manual-bridge-actions">
                            <div class="action-step">
                                <span class="step-num">1</span>
                                <button type="button" id="copyCaptionBtn" class="btn btn-secondary btn-sm btn-block">ูุณุฎ
                                    ุงูุนููุงู</button>
                            </div>
                            <div class="action-step">
                                <span class="step-num">2</span>
                                <button type="button" id="openFolderBtn" class="btn btn-secondary btn-sm btn-block">ูุชุญ
                                    ุงููุฌูุฏ</button>
                            </div>
                            <div class="action-step">
                                <span class="step-num">3</span>
                                <button type="button" class="btn btn-accent btn-sm btn-block"
                                    onclick="window.open('https://www.tiktok.com/upload', '_blank')">ูุชุญ TikTok</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Clear batch -->
            <section class="card clear-card">
                <div class="card-header">
                    <h2>ุชูุธูู</h2>
                </div>
                <div class="form">
                    <div class="input-row">
                        <select id="clearFolder">
                            <option value="">ุงุฎุชุฑ ุงููุฌูุฏ</option>
                            {% for f in merged_folders %}
                            <option value="{{ f.username }}" data-date="{{ f.date }}">{{ f.username }} / {{ f.date }}
                            </option>
                            {% endfor %}
                        </select>
                        <button type="button" id="clearBatchBtn" class="btn btn-secondary">ุญุฐู</button>
                    </div>
                </div>
            </section>

            <section class="status-section" id="statusSection">
                <div class="status-card" id="statusCard">
                    <div class="status-icon" id="statusIcon">โ</div>
                    <div class="status-text">
                        <strong id="statusTitle"></strong>
                        <span id="statusMessage"></span>
                    </div>
                </div>
            </section>

            <footer>
                <p class="copyright">SnapScrap ยฉ 2026</p>
            </footer>
        </main>
    </div>

    <script>
        window.INIT_ACCOUNTS = {{ accounts | tojson }};
    </script>
    <script src="/static/app.js"></script>
</body>

</html>